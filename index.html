<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  </head>
  <div style="display: flex; justify-content: center">
    <h1>Convert CSS to javascript object</h1>
  </div>
  <div style="display: flex; justify-content: space-around;">
    <form onsubmit="return doit();">
      <textarea id="inp" style="width: 400px; height: 200px;" placeholder="Input your CSS here"></textarea>
      <br/>
      <button>Submit</button>
    </form>

    <textarea id="out" style="width: 400px; height: 200px;"></textarea>
  </div>
  <div style="display: flex; flex-direction: column; justify-content: center; align-content: center;">
    <h2>Examples</h2>
    <pre>style= "display: flex;justify-content: center; text-align: center"</pre> converts to <pre>style = {{ display: "flex", justifyContent: "center", textAlign: "center" }}</pre>
    <br/>
    <pre>display: flex;justify-content: center; text-align: center;</pre> converts to <pre>{{ display: "flex", justifyContent: "center", textAlign: "center" }}</pre>
  </div>
</html>

<script type="text/javascript">
  function doit() {
    let inp = document.getElementById('inp').value;
    let ret = '';
    let stylePrefix = inp.startsWith('style') ?  'style = ' : '';
    for(i = 0; i < inp.length; i++) {
      if(inp[i] == '"' || inp[i] == ' ') {
        continue;
      }
      if(inp[i] == "=" ) {
        ret = '';
        continue;
      }
      if(inp[i] == ';') {
        ret += '", ';
        continue;
      }

      if(inp[i] == '-') {
        ret += inp[i+1].toUpperCase();
        i += 1;
        continue;
      }

      if(i > 2 && inp[i-2] == ':') {
        ret += ' "';
      }
      ret += inp[i];
    }
    ret = ret.trim();

    if(ret.endsWith(',"')) {
      ret = ret.substr(0, ret.length-1);
    }

    while(ret.endsWith(',')) {
      ret = ret.substr(0, ret.length-1);
    }

    if(ret[ret.length-1] != '"') {
      ret += '"';
    }

    document.getElementById('out').value = stylePrefix + "{{ " + ret + " }}";
    return false;
  }
</script>